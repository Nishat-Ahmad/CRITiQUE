{% extends 'base.html' %}

{% block content %}
<div class="max-w-3xl mx-auto py-16 px-6">
  
  <div class="mb-8">
    <h1 class="font-serif text-4xl font-bold text-stone-900 dark:text-white">Edit Spot</h1>
    <p class="text-stone-500 dark:text-stone-400 mt-2">Fixing a typo or updating the vibe?</p>
  </div>

  <div class="bg-white dark:bg-stone-900 rounded-3xl shadow-xl border border-stone-100 dark:border-stone-800 overflow-hidden">
    <form method="post" action="{{ url_for('edit_place_post', place_id=place.id) }}" class="p-8 md:p-12 space-y-8">
      
      <div>
        <label class="block text-sm font-bold text-stone-900 dark:text-stone-100 mb-2">Place Name</label>
        <input name="name" required value="{{ place.name }}"
          class="w-full text-2xl font-serif font-bold border-b-2 border-stone-200 dark:border-stone-700 bg-transparent dark:text-white py-2 focus:border-primary focus:outline-none transition-colors placeholder-stone-300 dark:placeholder-stone-600"
          placeholder="The Rusty Spoon">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label class="block text-xs font-bold uppercase text-stone-500 dark:text-stone-400 mb-2">Category</label>
          <div class="relative">
            <select name="type" class="w-full bg-stone-50 dark:bg-stone-800 dark:text-white border border-stone-200 dark:border-stone-700 rounded-xl px-4 py-3 appearance-none focus:ring-2 focus:ring-primary focus:outline-none font-medium">
              {% for t in place_types %}
                <option value="{{ t }}" {% if t == place.type %}selected{% endif %}>{{ t }}</option>
              {% endfor %}
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-stone-500">
              <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
          </div>
        </div>

        <div>
          <label class="block text-xs font-bold uppercase text-stone-500 dark:text-stone-400 mb-2">Location / Address</label>
          <input name="address" value="{{ place.address or '' }}"
            class="w-full bg-stone-50 dark:bg-stone-800 dark:text-white border border-stone-200 dark:border-stone-700 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:outline-none"
            placeholder="Student Center, 2nd Floor">
        </div>
      </div>

      <div>
        <label class="block text-xs font-bold uppercase text-stone-500 dark:text-stone-400 mb-2">Photo URL (Thumbnail)</label>
        <input name="photo" type="url" value="{{ place.photo or '' }}"
          class="w-full bg-stone-50 dark:bg-stone-800 dark:text-white border border-stone-200 dark:border-stone-700 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:outline-none font-mono text-sm"
          placeholder="https://images.unsplash.com/photo-1555396273...">
        <p class="text-[10px] text-stone-400 mt-2">Paste a direct image link (ends in .jpg or .png usually).</p>
      </div>

      <div>
        <label class="block text-xs font-bold uppercase text-stone-500 dark:text-stone-400 mb-2">The Vibe</label>
        <textarea name="description" rows="4" 
          class="w-full bg-stone-50 dark:bg-stone-800 dark:text-white border border-stone-200 dark:border-stone-700 rounded-xl p-4 focus:ring-2 focus:ring-primary focus:outline-none"
          placeholder="Best coffee on campus, but the wifi is spotty...">{{ place.description or '' }}</textarea>
      </div>

      <div>
        <label class="block text-xs font-bold uppercase text-stone-500 dark:text-stone-400 mb-2">Tags</label>
        <input name="tags" value="{{ place.tags or '' }}"
          class="w-full bg-stone-50 dark:bg-stone-800 dark:text-white border border-stone-200 dark:border-stone-700 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:outline-none"
          placeholder="cheap, spicy, vegan, late-night">
        <p class="text-[10px] text-stone-400 mt-2">Separate tags with commas. Example: <em>Coffee, Study Spot, Cheap</em></p>
      </div>

      <div class="pt-4 flex items-center justify-end gap-4">
        <a href="{{ url_for('place_view', place_id=place.id) }}" class="text-stone-500 font-bold hover:text-stone-800 dark:hover:text-stone-300 transition-colors">Cancel</a>
        <button type="submit" class="bg-stone-900 dark:bg-stone-700 hover:bg-primary text-white font-bold py-3 px-8 rounded-xl shadow-lg transition-transform active:scale-95">
          Update Spot
        </button>
      </div>

    </form>
  </div>
</div>
{% endblock %}